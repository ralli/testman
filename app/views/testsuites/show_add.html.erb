<h1>Add Testcases</h1>

<% content_for :title => 'Add Testcases' %>
<% content_for :head do %>
  <style type="text/css">
    .handle {
      color: #aaaaaa;
      font-size: 0.8em;
      cursor: move;
    }
    ol.testcases {
      list-style: none;
      margin: 0px;
      padding: 1em;
      background-color: #eeeeff;
      border-color: #aaaaaa;
      border-style: solid;
      border-width: 1px;
    }

    ol.testcases li {
      background-color: white;
      border-color: #aaaaaa;
      border-style: solid;
      border-width: 1px;
      padding: 0.2em;
      margin-bottom: 0.3em;
    }
  </style>

  <script type="text/javascript">
    $(function() {
      $('#testcases').sortable({
        connectWith: '#testentries',
        helper: 'clone',
        handle: '.handle',
        revert: true
      });

      $('#testentries').sortable({
        handle: '.handle',
        axis: 'y',
        update: function() {
          $('#message').hide();
          $.post('<%= assign_testcase_testsuite_url(@testsuite) %>', $('#testentries').sortable('serialize'));
        }
      });

      $('.delete').click(function() {
        $("#message").hide();
        $.post('<%= remove_testcase_testsuite_url(@testsuite)%>', "entryid=" + $(this).attr('id') );
        $(this).parent('li').remove();
        return false;
      });
    })
  </script>
<% end %>

<div id="debug">
</div>
<div id="message" class="notice" style="display: none">
  Hossa
</div>
<fieldset class="span-24 last" style="margin-bottom: 1em;">
  <legend>Testsuite</legend>
  <div class="fieldset span-22 last">
    <div class="label span-2"><%= @testsuite.key %></div>
    <div class="span-20 last"><%= @testsuite.name %></div>
    <div class="span-22 last" style="margin-top: 1em;"><%= link_to 'Back', @testsuite %></div>
  </div>

</fieldset>
<div class="span-11 testcases">
  <h2>Available testcases</h2>
  <ol class="testcases" id="testcases">
    <%= render 'testcases' %>
  </ol>
</div>

<div class="span-11 right last">
  <h2>Assigned testcases</h2>
  <ol class="testcases" id="testentries">
    <%= render 'testsuite_entries' %>
  </ol>
</div>